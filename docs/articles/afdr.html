<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating an Alternative FDR' (aFDR) ranking of opponents by FPL points allowed • fplscrapR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating an Alternative FDR' (aFDR) ranking of opponents by FPL points allowed">
<meta property="og:description" content="fplscrapR">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fplscrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/afdr.html">Creating an Alternative FDR' (aFDR) ranking of opponents by FPL points allowed</a>
    </li>
    <li>
      <a href="../articles/afdrtable.html">Creating an 'Alternative FDR' (aFDR) fixture table</a>
    </li>
    <li>
      <a href="../articles/allvignettes.html">All Vignettes</a>
    </li>
    <li>
      <a href="../articles/aubatransfers.html">Aubameyang ownership and net transfers for the first 25 gameweeks</a>
    </li>
    <li>
      <a href="../articles/avgfplplayercost.html">Most expensive teams by average FPL player cost</a>
    </li>
    <li>
      <a href="../articles/bpsforgame.html">Comparing total team BPS scores for a given game</a>
    </li>
    <li>
      <a href="../articles/dgw32ppms.html">Top options by FPL points per 90 mins</a>
    </li>
    <li>
      <a href="../articles/entryscores.html">Average and top entry scores for the first 25 gameweeks</a>
    </li>
    <li>
      <a href="../articles/fantasianplayingtime.html">Replicating Fantasian's playing time visualisation</a>
    </li>
    <li>
      <a href="../articles/fdrtable.html">Creating your own 'FDR' fixture table</a>
    </li>
    <li>
      <a href="../articles/findgoalscorers.html">Finding the names of goalscorers in a given fixture</a>
    </li>
    <li>
      <a href="../articles/fixtable.html">Creating a simple fixture table</a>
    </li>
    <li>
      <a href="../articles/hazalexishist.html">Comparing historical FPL total season scores for Mesut Özil and Juan Mata</a>
    </li>
    <li>
      <a href="../articles/listmyleagues.html">List your classic mini-leagues and current ranks</a>
    </li>
    <li>
      <a href="../articles/myxpts.html">My Expected Points</a>
    </li>
    <li>
      <a href="../articles/salahpoints.html">Mohamed Salah's points in each gameweek for the first 25 gameweeks</a>
    </li>
    <li>
      <a href="../articles/simplexamodel.html">Building a very simple expected assists (xA) model</a>
    </li>
    <li>
      <a href="../articles/talismantheory.html">Replicating Who Got The Assist?'s Talisman Theory</a>
    </li>
    <li>
      <a href="../articles/topperformers.html">List of top performers by FPL goals and assists</a>
    </li>
    <li>
      <a href="../articles/vizentryhist.html">Visualizing the FPL histories of entries</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/wiscostret/fplscrapR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating an Alternative FDR’ (aFDR) ranking of opponents by FPL points allowed</h1>
                        <h4 class="author">Rasmus Wiscostretford</h4>
            
            <h4 class="date">2020-09-15</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/wiscostret/fplscrapR/blob/master/vignettes/afdr.Rmd"><code>vignettes/afdr.Rmd</code></a></small>
      <div class="hidden name"><code>afdr.Rmd</code></div>

    </div>

    
    
<p>Suppose now we are interested in trying to create an alternative to FPL’s “FDR” (Fixture Difficulty Ranking) based on actual FPL points allowed? Again, we take the first 25 gameweeks of the ’18/19 season as an example.</p>
<p>First we fetch the gameweek-by-gameweek details of ALL players using get_player_details:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">fplscrapR</span>)

<span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_player_details.html">get_player_details</a></span>(<span class="kw">season</span><span class="kw">=</span><span class="fl">18</span>) <span class="co"># this may take a while to load as it fetches ALL player details</span></pre></body></html></div>
<p>Next we use dplyr and ggplot2 to transform and plot the data, ranking the teams by FPL points allowed:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)</pre></body></html></div>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">df</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">round</span> <span class="kw">%in%</span> <span class="fl">1</span>:<span class="fl">25</span>) <span class="kw">%&gt;%</span> <span class="co"># filter out the gameweeks we are interested in</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">opponent_team</span>) <span class="kw">%&gt;%</span> <span class="co"># transformation to group and summarize the total_points (scored by a given player in a given round) by the opponent ('opponent_team') variable level</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">total_points</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span>(<span class="no">opponent_team</span>,<span class="no">`sum(total_points)`</span>),<span class="kw">y</span><span class="kw">=</span><span class="no">`sum(total_points)`</span>,<span class="kw">fill</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">opponent_team</span>))) +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="kw">colour</span><span class="kw">=</span><span class="st">"black"</span>) +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>() +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span>() +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span>(<span class="kw">labels</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span><span class="kw">=</span><span class="st">"ARS"</span>,<span class="st">"2"</span><span class="kw">=</span><span class="st">"BOU"</span>,<span class="st">"3"</span><span class="kw">=</span><span class="st">"BHA"</span>,<span class="st">"4"</span><span class="kw">=</span><span class="st">"BUR"</span>,<span class="st">"5"</span><span class="kw">=</span><span class="st">"CAR"</span>,<span class="st">"6"</span><span class="kw">=</span><span class="st">"CHE"</span>,<span class="st">"7"</span><span class="kw">=</span><span class="st">"CRY"</span>,<span class="st">"8"</span><span class="kw">=</span><span class="st">"EVE"</span>,<span class="st">"9"</span><span class="kw">=</span><span class="st">"FUL"</span>,<span class="st">"10"</span><span class="kw">=</span><span class="st">"HUD"</span>,<span class="st">"11"</span><span class="kw">=</span><span class="st">"LEI"</span>,<span class="st">"12"</span><span class="kw">=</span><span class="st">"LIV"</span>,<span class="st">"13"</span><span class="kw">=</span><span class="st">"MCI"</span>,<span class="st">"14"</span><span class="kw">=</span><span class="st">"MUN"</span>,<span class="st">"15"</span><span class="kw">=</span><span class="st">"NEW"</span>,<span class="st">"16"</span><span class="kw">=</span><span class="st">"SOU"</span>,<span class="st">"17"</span><span class="kw">=</span><span class="st">"TOT"</span>,<span class="st">"18"</span><span class="kw">=</span><span class="st">"WAT"</span>,<span class="st">"19"</span><span class="kw">=</span><span class="st">"WHU"</span>,<span class="st">"20"</span><span class="kw">=</span><span class="st">"WOL"</span>)) + <span class="co"># here we transform the numbered team labels to the FPL short letter names</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span><span class="kw">=</span><span class="st">"Team"</span>,<span class="kw">y</span><span class="kw">=</span><span class="st">"Total FPL points allowed"</span>,<span class="kw">title</span><span class="kw">=</span><span class="st">"Alternative FDR ranking - by total FPL points allowed"</span>,<span class="kw">subtitle</span><span class="kw">=</span><span class="st">"Season 2018/2019 - Gameweeks 1-25"</span>,<span class="kw">caption</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"Data from fplscrapR | "</span>,<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>(),<span class="kw">sep</span><span class="kw">=</span><span class="st">""</span>)) +
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span>(<span class="kw">values</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"1"</span><span class="kw">=</span><span class="st">"#EF0107"</span>,<span class="st">"2"</span><span class="kw">=</span><span class="st">"#000000"</span>,<span class="st">"3"</span><span class="kw">=</span><span class="st">"#0057B8"</span>,<span class="st">"4"</span><span class="kw">=</span><span class="st">"#6C1D45"</span>,<span class="st">"5"</span><span class="kw">=</span><span class="st">"#0070B5"</span>,<span class="st">"6"</span><span class="kw">=</span><span class="st">"#034694"</span>,<span class="st">"7"</span><span class="kw">=</span><span class="st">"#1B458F"</span>,<span class="st">"8"</span><span class="kw">=</span><span class="st">"#003399"</span>,<span class="st">"9"</span><span class="kw">=</span><span class="st">"#FFFFFF"</span>,<span class="st">"10"</span><span class="kw">=</span><span class="st">"#0E63AD"</span>,<span class="st">"11"</span><span class="kw">=</span><span class="st">"#003090"</span>,<span class="st">"12"</span><span class="kw">=</span><span class="st">"#C8102E"</span>,<span class="st">"13"</span><span class="kw">=</span><span class="st">"#6CABDD"</span>,<span class="st">"14"</span><span class="kw">=</span><span class="st">"#DA291C"</span>,<span class="st">"15"</span><span class="kw">=</span><span class="st">"#241F20"</span>,<span class="st">"16"</span><span class="kw">=</span><span class="st">"#D71920"</span>,<span class="st">"17"</span><span class="kw">=</span><span class="st">"#132257"</span>,<span class="st">"18"</span><span class="kw">=</span><span class="st">"#FBEE23"</span>,<span class="st">"19"</span><span class="kw">=</span><span class="st">"#7A263A"</span>,<span class="st">"20"</span><span class="kw">=</span><span class="st">"#FDB913"</span>),<span class="kw">guide</span><span class="kw">=</span><span class="no">F</span>) <span class="co"># here we add the team-specific colours to the plot</span></pre></body></html></div>
<p><img src="afdr_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
